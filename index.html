<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    
        <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABVQTFRFAAAA/Gz/AEgA/NgAIFoA/LSqAAAA51qtOQAAAAd0Uk5TAP///////6V/pvsAAAA/SURBVHicY2CAAgEYg4FREM5UEoQJM5sowoSNjZWgoszGxkZwQWMDuKAxDQVD4YIMocEwQYbUUJggQ1oojAUAbRwMZj2/gx8AAAAASUVORK5CYII=">

        <title>Scratchpad</title>
        
        <style>

            body {
                margin: 0; padding: 0;
                height: 100%;
                background: black; color: white;
                overflow: hidden;
            }

            #editor {
                font-family: 'Courier New', Courier, monospace;
                margin: 0; padding: 0;
                width: 100%; height: 100vh;
                background: black; color: white;
                border: none;
                resize: none;
            }

            #inputfile {
                display: none;
            }

        </style>

    </head>

    <body>

        <textarea id="editor" spellcheck="false" autofocus placeholder="&NewLine; Scratchpad...&NewLine;&NewLine; CTRL + s: Save&NewLine; CTRL + o: Open&NewLine;&NewLine; Type to get started."></textarea>

        <input type="file" name="inputfile" id="inputfile">

        <script>

            document.addEventListener("keydown", onKeyDown, false);

            document.getElementById('inputfile').addEventListener('change', function() {
                
                var fr=new FileReader();
                fr.onload=function(){
                    document.getElementById('editor').value=fr.result;
                }
                
                fr.readAsText(this.files[0]);
            })
            
            function onKeyDown(e) {

                if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) { // "CTRL+s"
                    e.preventDefault();
                    var textcontent = document.getElementById("editor").value;
                    var downloadableLink = document.createElement('a');
                    downloadableLink.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(textcontent));
                    downloadableLink.download = `Scratchpad-${new Date().toLocaleString().replace(/, /g, "-").replace(/[:\/]/g, "_")}.txt`;
                    document.body.appendChild(downloadableLink);
                    downloadableLink.click();
                    document.body.removeChild(downloadableLink);
                }

                if (e.keyCode == 79 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) { // "CTRL+o"
                    e.preventDefault();
                    var eventMouse = document.createEvent("MouseEvents")
	                eventMouse.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)
	                document.getElementById("inputfile").dispatchEvent(eventMouse)
                }

            }

        </script>
        
    </body>

</html>
